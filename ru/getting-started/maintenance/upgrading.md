---
title: "Обновление MODX сайта"
_old_id: "321"
_old_uri: "2.x/administering-your-site/upgrading-modx"
---

Этот документ описывает обновление для MODX версий 2.x. Если вам необходимо обновить более раннюю версию Evolution (1.x), то это официально не поддерживается в настоящее время, но материалы, которые вам помогут в этом вопросе, вы можете [найти здесь](display/revolution20/Upgrading+from+MODX+Evolution). 

## Обновление MODX Revolution версии 2.x

 В этом документе предполагается, что вы выполняете обновление со стандартной установки. Для пользователей Git см. [Установка при помощи Git](getting-started/installation/git "Установка при помощи Git").

 **Последнюю версию MODX Revolution можно найти по адресу** **<https://modx.com/download/>**

 Обязательно сделайте резервную копию ваших файлов и базы данных перед обновлением. Обновления должны проходить гладко, но это **всегда** безопасная и разумная практика - сделать резервную копию.

 При обновлении MODX Revolution с версий 2.0.x до 2.1.x ОЧЕНЬ важно осознавать, что многие функции устарели. Большинство дополнений будут обновлены для использования новых методов, однако, возможно вы не всегда используете последнюю версию. Итак, ДО начала процесса обновления убедитесь, что все ваши пакеты обновлены и работают должным образом в версии 2.0.x. Если вы этого не сделаете, вы можете оказаться заблокированным в каком-то подвешенном состоянии, где менеджер не может быть доступен из-за фатальных ошибок PHP. Несмотря на то, что это часто можно исправить путем удаления или обновления поврежденных файлов вручную, в некоторых серверных настройках у вас может не быть доступа к файлам, сгенерированных PHP (например, к файлам, созданным менеджером пакетов при установке), что потребует много дополнительной работы для исправления.
 

 **Что нужно сделать перед обновлением:** 
- Обновите все пакеты, если это необходимо
- Выйдите из MODX (используйте «Завершить все сеансы» из меню менеджера)
- Удалите все содержимое из папки core/cache


## Загрузка файлов


 Как правило, лучше не использовать FTP для загрузки файлов, которые были извлечены локально. FTP может пропустить или повредить файлы, что приведет к ошибкам в вашей установке. Это также намного медленнее, чем использование файлового менеджера на самом сервере. Если файловый менеджер вашего сервера не разрешает извлечение, проверьте в панели управления возможность извлечения скриптом.

 Для пользователей традиционных дистрибутивов просто загрузите копию файла-архива MODX.zip, который вы хотите обновить, на свой сервер, а затем извлеките файлы на самом сервере в новую папку.

 Откройте новую папку, выберите все извлеченные файлы и объедините/скопируйте их в корневой каталог/папку установки MODX (при этом часть прежних MODX файлов будет заменена новыми). Теперь вы можете удалить файл MODX.zip и папку, в которую извлекали этот архив, с сервера. Ваша папка установки MODX теперь должна содержать вновь объединенные файлы(те,что были ранее и те, что были перезаписаны) плюс новую папку «setup».

 Для продвинутого дистрибутива сделайте то же самое, но вам нужно будет сделать это только для директорий core/ и setup/. Вам нужно убедиться, что manager и connectors каталоги и их файлы доступны для записи.

 Убедитесь, что вы не перезаписываете файл core/config/config.inc.php и что он доступен для записи. Кроме того, не перезаписывайте и не стирайте каталог core /components/.

 Было бы здорово использовать FTP-клиент, который поддерживает **слияние каталогов**. Вам не нужно без разбора **перезаписывать** каталоги: вы хотите лишь добавить обновленные файлы внутри каталогов только туда, где это необходимо. Самораспаковывающийся механизм обновления MODX еще не реализован, так что до этого времени **очень** удобно иметь программу FTP, которая поддерживает слияние каталогов или, что еще лучше, использовать какой-либо скрипт извлечения на сервере либо возможности файлового менеджера, как это предложено выше.

 На OS X вы можете приобрести что-либо из следующих:

- [Coda](http://panic.com/coda/)
- [Transmit](http://panic.com/transmit/)

 
  **Не перезаписывайте директории!**
 Убедитесь, что ваша FTP-программа _сливает вместе_ директории и не перезаписывает их!

- - - - - -

## Начало установки

 В вашем браузере перейдите на [yourSite.com/setup](http://yourSite.com/setup) .Выберите свой язык и следуйте процессу установки/обновления, выбирая, какое обновление вы хотите выполнить (обычное или с настройкой базы данных).

 Обновление уже должно быть предварительно выбрано для вас, однако, если этого не произошло, убедитесь, что вы выбрали «Обновление существующей установки», чтобы не перезаписывать вашу существующую базу данных. Вариант «Новая установка» перезапишет вашу базу данных.

 Если вы выполняете обновление с помощью **Расширенного обновления**, убедитесь, что у вас сняты флажки "Базовый пакет был распакован вручную" и "Файлы уже размещены", а каталоги core/, manager/ и connectors/ доступны для записи.

 Если во время установки возникают ошибки, прочтите [Проблемы установки] (getting-started/installation/troubleshooting "Проблемы установки") и  [Решение проблем с обновлением] (getting-started/installation/troubleshooting "Troubleshooting Installation").

## После установки

 После завершения установки обязательно удалите каталог setup/ с помощью последней опции, чтобы никто не смог запустить установку после вас и, возможно, сломать ваш сайт.

 Ваш файл config.inc.php должен иметь права доступа CHMOD 644.

 Хорошая идея - очистить кеш браузера после обновления. Браузеры часто кэшируют JS и CSS, а вы хотите быть уверены, что после обновления вы получаете самые новые файлы в вашем браузере.


## Изменения в зависимости от версии

 Для обновлений, касающихся определенных версий, пожалуйста ознакомьтесь со следующими страницами:

- [Обновление до версии 2.2](administering-your-site/upgrading-modx/upgrading-to-2.2.x "Обновление до 2.2.x")
- [Обновление с версии 2.0.x до 2.1.x](administering-your-site/upgrading-modx/upgrading-from-2.0.x-to-2.1.x "Обновление с версии 2.0.x до 2.1.x") **!важно**
- [Обновление с более ранних версий до 2.0.5](administering-your-site/upgrading-modx/upgrading-from-versions-earlier-than-2.0.5 "Обновление с более ранних версий до 2.0.5")
- [Обновление до версии MODX Revolution 2.0.0-rc-2](administering-your-site/upgrading-modx/upgrading-to-revolution-2.0.0-rc-2 "Обновление до версии MODX Revolution 2.0.0-rc-2")

 Обновления после 2.0.0-rc-2 должны выполняться без проблем.

## Смотри также

### Пользователи Mac OS X 

 Если вы копируете извлеченную папку в Mac OS X, будьте осторожны, поскольку OS X будет "заменять" папки, когда вы перетаскиваете их друг на друга. Убедитесь, что вы используете команду "ditto" из командной строки, а не перетаскиваете из Finder, в противном случае ваш файл core/config/config.inc.php будет удален. Вот пример команды ditto после того, как вы распаковали zip файл:

 ``` php 
ditto modx-2.1.0-pl /www/public_html/modx/
```

 Эффект тот же, если вы используете команду **cp**:

 ``` php 
cp -fr modx-2.2.0-pl/* /www/public_html/modx
```

 Флаг "-fr" вызывает рекурсивную копию (то есть слияние каталогов). Использование обратной косой черты перед командой "cp" позволяет избежать всех запросов, спрашивающих "Вы уверены?" для каждой операции перезаписи.

 См. Примечание выше о клиентах FTP, которые поддерживают слияние каталогов.

### Смотрите также

1. [Решение проблем с обновлением](getting-started/maintenance/upgrading/troubleshooting)
2. [Обновление до версии 2.2.x](administering-your-site/upgrading-modx/upgrading-to-2.2.x)
3. [Обновление с версии 2.0.x до 2.1.x](administering-your-site/upgrading-modx/upgrading-from-2.0.x-to-2.1.x)
4. [Обновление с более ранних версий до 2.0.5](administering-your-site/upgrading-modx/upgrading-from-versions-earlier-than-2.0.5)
5. [Обновление до версии MODX Revolution 2.0.0-rc-2](administering-your-site/upgrading-modx/upgrading-to-revolution-2.0.0-rc-2)
6. [Обновление с MODX Evolution](administering-your-site/upgrading-modx/upgrading-from-modx-evolution)
7. [Функциональные отличия от Evolution](administering-your-site/upgrading-modx/upgrading-from-modx-evolution/functional-changes-from-evolution)
