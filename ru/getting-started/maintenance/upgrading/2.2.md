---
title: "Обновление до 2.2"
translation: "getting-started/maintenance/upgrading/2.2"
---

## Вступление

В этой статье описаны основные изменения MODX Revolution в версии 2.2. Пожалуйста, ознакомьтесь с этими изменениями при обновлении ваших сайтов до версии 2.2 с предыдущей установки MODX Revolution.

## Медиа источники

Большое изменение в 2.2 - введение [Медиа источники] (building-sites/media-sources "Медиа источники"). Они абстрагируют вкладку «Файлы» в MODX, чтобы разрешить использование нескольких источников для дерева файлов, таких как файловая система, корзина S3 или другие типы источников. Они интегрируются непосредственно в большинство менеджеров MODX, включая `MODX.Browser`, [переменные шаблона](building-sites/elements/template-variables) и общие манипуляции с файлами. Что это значит для апгрейда?

Это означает, что **все параметры** ввода файлового менеджера **Настройки** _и_ `basePath/baseUrl` **устарели**. Ни один из них больше не используется менеджером MODX. Источники теперь определяют `basePath` и `baseUrl` дерева, а не параметры ввода «Настройки» или «ТВ». Такой подход, ориентированный на источник, обеспечивает гораздо более стабильную масштабируемость и использование.

MODX попытается создать новые источники мультимедиа для любых настроек файлового менеджера и любых пользовательских TV с изображениями/файлами, которые имеют собственный `basePath`. В случае системных настроек `filemanager` для исходного кода по умолчанию будут изменены значения `baseUrl` и `basePath`. В случае параметров ввода ТВ с настраиваемыми параметрами basePath появятся новые источники, которые автоматически связываются с этими телевизорами.

Любые системные настройки `filemanager` необходимо будет перенести вручную, так как идея исходных базовых путей, специфичных для пользователя, больше не существует. Используйте списки управления доступом к источнику мультимедиа с группой пользователей, которую вы можете [узнать, как это сделать здесь](building-sites/media-sources/securing "Защита медиаисточника").

## Статические элементы

MODX 2.2 представляет «статические» элементы, которые представляют собой элементы, расположенные в файловой системе через источник мультимедиа. Чтобы использовать статический элемент, просто создайте элемент (Чанк/Сниппет/Шаблон/и т.д.), а затем установите флажок «Статический». Затем появятся два всплывающих поля:

-   **Статический источник** - в этом поле указывается источник мультимедиа для использования при поиске статического файла. Выберите «Нет», чтобы указать абсолютный путь к файлу.
-   **Статический файл** - в этом поле указывается путь к файлу относительно выбранного вами медиаисточника (или «Нет» для абсолютных путей). Вы также можете использовать теги в этом поле, например, Системные настройки.

Например, если вы выбрали источник мультимедиа файловой системы с относительным базовым путем `assets/`, а затем указали исходный файл как `templates/test.tpl`, он будет искать файл шаблона в `/path/to/my/modx/assets/templates/test.tpl`.

## Дашборды

Вы заметите, что ваша основная панель управления будет выглядеть немного иначе. Основные виджеты и функциональность останутся прежними: однако теперь вы сможете создавать настраиваемые информационные панели для различных групп пользователей, а также переупорядочивать и назначать им виджеты. См. документацию [Дашборды](administering-your-site/dashboards).

## Другие изменения

### Сортировка контекстов в дереве

Сортировка контекстов теперь доступна в дереве ресурсов, однако по умолчанию он отключен. Чтобы включить его, установите для системной настройки `context_tree_sortby` значение Yes, а затем измените поле `context_tree_sortby` на «rank». Это позволит вам сортировать контексты в дереве перетаскиванием.

### Основная группа пользователей

Теперь у пользователей может быть «основная» группа пользователей, к которой они принадлежат. Это группа пользователей, которой они присвоены с рангом 0. Если они входят только в одну группу пользователей, эта группа будет их основной группой.

### Минификация в Менеджере

Менеджер MODX теперь использует [Google Minify](http://code.google.com/p/minify/) для автоматического сжатия CSS и JS в менеджере. По умолчанию это включено. Однако если вы хотите отключить его, вы можете сделать это, установив для системных настроек `compress_js` и `compress_css` значение `0`.

### Улучшения Настройки формы

Благодаря новым улучшениям пользовательского интерфейса на экране редактирования ресурсов, настройка формы теперь может настраивать таргетинг на определенные столбцы на вкладках для перемещения телевизоров. Их идентификаторы теперь отображаются на вкладке «Вкладки» при редактировании набора настроек формы.

### Теги комментариев

Пользователи MODX теперь могут использовать теги комментариев в своем контенте:

```php
[[- Тут комментарий]]
```

Все, что находится внутри одного из этих тегов, будет удалено перед отрисовкой страницы.

### Перемещение TV под панель содержимого

В версии 2.2 вы также можете перемещать переменные шаблона под панель «Содержимое» при их редактировании в ресурсе. Это делается простым изменением параметра _tvs_below_content_ на «Да».

### Обновление / установка через командную строку

В версии 2.2 MODX можно установить и обновить из командной строки. См. [Установка из командной строки](getting-started/installation/cli "Установка из командной строки") для дополнительной информации.

### Свойства элемента предварительной обработки по умолчанию и наборы свойств

Разработчики и пользователи MODX теперь могут указывать конкретным элементам предварительную обработку любых тегов MODX в свойствах по умолчанию и значениях набора свойств. Если этот флажок установлен на вкладке «Свойства» элемента, элемент будет пытаться проанализировать все теги, которые отображаются в значениях свойств по умолчанию или значениях, присвоенных наборами свойств, так что поведение будет таким же, как если бы свойство было установлено в самой строке тега. В остальном поведение такое же: теги в значениях свойств по умолчанию или значениях наборов свойств передаются непосредственно в элемент без обработки.

## Смотрите также

1. [Troubleshooting Upgrades](getting-started/maintenance/upgrading/troubleshooting)
2. [Upgrading to 2.2.x](getting-started/maintenance/upgrading/2.2)
3. [Upgrading from 2.0.x to 2.1.x](getting-started/maintenance/upgrading/2.1)
4. [Upgrading from Versions Earlier than 2.0.5](getting-started/maintenance/upgrading/2.0.5)
5. [Upgrading to Revolution 2.0.0-rc-2](getting-started/maintenance/upgrading/2.0.0-rc2)
6. [Upgrading from MODX Evolution](getting-started/maintenance/upgrading/evolution)
    1. [Functional Changes from Evolution](getting-started/maintenance/upgrading/evolution/functional-changes)
